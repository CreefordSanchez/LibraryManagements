@using Microsoft.AspNetCore.Identity;
@inject UserManager<IdentityUser> UserManager
@inject RoleManager<IdentityRole> RoleManage
@model Book;
@{
	IEnumerable<BookReview> reviews = ViewBag.Reviews;
	ViewData["Title"] = Model.Title;
}

<div>
	<div class="bookInfo">
		<h1>@Model.Title</h1>
		<h5>@Model.Author</h5>
		<p>@Model.Genre</p>
		<p>@Model.Published</p>
	</div>
	<div class="reviews">
		<table class="table">
			<thead>
				<tr>
					<th>UserId</th>
					<th>Rating</th>
					<th>Comment</th>
				</tr>
			</thead>
			<tbody>
				@foreach (BookReview review in reviews) {
					<tr>
						<td>@review.UserId</td>
						<td>@review.Rating</td>
						<td>@review.Comment</td>
					</tr>
				}
			</tbody>
		</table>
	</div>
</div>

@if(User.IsInRole("User")){
	<a asp-controller="BookReview" asp-action="Create">Add Review for this Book</a>
}


